From 7e99c83a82c39353c162037f3f5e6b6e6af654ff Mon Sep 17 00:00:00 2001
From: Yu Chien Peter Lin <peterlin@andestech.com>
Date: Sun, 30 Oct 2022 20:49:32 +0800
Subject: [PATCH] riscv: dts: Update PLICSW and PLMT for OpenSBI

Signed-off-by: Yu Chien Peter Lin <peterlin@andestech.com>
---
 arch/riscv/dts/r9a07g043f.dtsi | 6 +++---
 arch/riscv/lib/andes_plic.c    | 2 +-
 arch/riscv/lib/andes_plmt.c    | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/riscv/dts/r9a07g043f.dtsi b/arch/riscv/dts/r9a07g043f.dtsi
index b8608092af..69aaa9bca4 100644
--- a/arch/riscv/dts/r9a07g043f.dtsi
+++ b/arch/riscv/dts/r9a07g043f.dtsi
@@ -93,9 +93,9 @@
 			interrupts-extended = <&CPU0_intc 11 &CPU0_intc 9>;
 		};
 
-		plic1: interrupt-controller@13000000 {
+		plicsw: interrupt-controller@13000000 {
 			u-boot,dm-spl;
-			compatible = "riscv,plic1";
+			compatible = "andestech,plicsw";
 			#address-cells = <2>;
 			#interrupt-cells = <2>;
 			interrupt-controller;
@@ -105,7 +105,7 @@
 
 		plmt0@110c0000 {
 			u-boot,dm-spl;
-			compatible = "riscv,plmt0";
+			compatible = "andestech,plmt0";
 			reg = <0x0 0x110c0000 0x0 0x100000>;
 			interrupts-extended = <&CPU0_intc 7>;
 		};
diff --git a/arch/riscv/lib/andes_plic.c b/arch/riscv/lib/andes_plic.c
index c2a8fe4d9e..69f6ed65d4 100644
--- a/arch/riscv/lib/andes_plic.c
+++ b/arch/riscv/lib/andes_plic.c
@@ -120,7 +120,7 @@ int riscv_get_ipi(int hart, int *pending)
 }
 
 static const struct udevice_id andes_plic_ids[] = {
-	{ .compatible = "riscv,plic1", .data = RISCV_SYSCON_PLIC },
+	{ .compatible = "andestech,plicsw", .data = RISCV_SYSCON_PLIC },
 	{ }
 };
 
diff --git a/arch/riscv/lib/andes_plmt.c b/arch/riscv/lib/andes_plmt.c
index a7e90ca992..b530370149 100644
--- a/arch/riscv/lib/andes_plmt.c
+++ b/arch/riscv/lib/andes_plmt.c
@@ -42,7 +42,7 @@ int riscv_get_time(u64 *time)
 }
 
 static const struct udevice_id andes_plmt_ids[] = {
-	{ .compatible = "riscv,plmt0", .data = RISCV_SYSCON_PLMT },
+	{ .compatible = "andestech,plmt0", .data = RISCV_SYSCON_PLMT },
 	{ }
 };
 
-- 
2.34.1

